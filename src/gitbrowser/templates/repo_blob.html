{% extends "repository_browse_template.html" %}
{% load gb_tags %}
{% load humanize %}
{% load highlight %}

{% block styles %}
<link href="{% url 'styles' %}" rel="stylesheet">
{% endblock %}

{% block title %}{{blob.path}} in {{repository.name}}{% if repository.path %} :: {{repository.path}}{% endif %}{% endblock %}

{% block repository_browse_content %}
	<div itemscope itemtype="http://schema.org/Code">
		<meta itemprop="codeRepository" content="{{repository.clone_urls|first}}" />
		<meta itemprop="sampletype" content="inline code" />
		<p>
			{% author_tag blob.latest_commit.author %}, {{blob.latest_commit.authored_datetime|time_tag}}:

			<a itemprop="url" href="{% url 'commit' repository.relative_path blob.latest_commit.hexsha %}" title="{{blob.latest_commit.summary}}">{{blob.latest_commit.summary}}</a>
		</p>

		{% if blob.can_display %}
			{% highlight blob.content blob.mime_type blob.name linenos=True %}
		{% else %}
			<p>I'm sorry, i cannot display files with <code>{{blob.mime_type}}</code>.</p>
		{% endif %}
	</div>
{% endblock %}